{"ast":null,"code":"import _defineProperty from \"/Users/mina/Code/stock-frontend-v2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/mina/Code/stock-frontend-v2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classCallCheck from \"/Users/mina/Code/stock-frontend-v2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/mina/Code/stock-frontend-v2/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/mina/Code/stock-frontend-v2/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"/Users/mina/Code/stock-frontend-v2/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nvar _jsxFileName = \"/Users/mina/Code/stock-frontend-v2/src/pages/Login/index.js\";\nimport React from \"react\";\nimport Joi from \"joi\";\nimport _ from \"lodash\";\nimport Input from \"../../components/common/Input\";\nimport { connect } from \"react-redux\";\nimport { signIn as _signIn } from \"../../actions/authAction\";\nimport Button from \"../../components/common/Button\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar Login = /*#__PURE__*/function (_React$Component) {\n  _inherits(Login, _React$Component);\n  var _super = _createSuper(Login);\n  function Login() {\n    var _this;\n    _classCallCheck(this, Login);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      data: {\n        email: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    _this.schema = {\n      email: Joi.string().email().required().label(\"Email\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n    _this.handleChange = function (_ref) {\n      var input = _ref.currentTarget;\n      var errors = _objectSpread({}, _this.state.errors);\n      var errorMessage = _this.validateProperty(input);\n      if (errorMessage) errors[input.name] = errorMessage;else delete errors[input.name];\n      var data = _objectSpread({}, _this.state.data);\n      data[input.name] = input.value;\n      _this.setState({\n        data: data,\n        errors: errors\n      });\n    };\n    _this.validateProperty = function (input) {\n      var name = input.name,\n        value = input.value;\n      var obj = _defineProperty({}, name, value);\n      var schema = _defineProperty({}, name, _this.schema[name]);\n      var _Joi$validate = Joi.validate(obj, schema),\n        error = _Joi$validate.error;\n      return error ? error.details[0].message : null;\n    };\n    _this.validate = function () {\n      var options = {\n        abortEarly: false\n      };\n      var result = Joi.validate(_this.state.data, _this.schema, options);\n      if (!result.error) return null;\n      var errors = {};\n      result.error.details.forEach(function (element) {\n        return errors[element.path[0]] = element.message;\n      });\n      return errors;\n    };\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var errors = _this.validate();\n      if (_.isEmpty(errors)) _this.props.signIn(_this.state.data);\n    };\n    return _this;\n  }\n  _createClass(Login, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n        data = _this$state.data,\n        errors = _this$state.errors;\n      var email = data.email,\n        password = data.password;\n      var _this$props = this.props,\n        authMessage = _this$props.authMessage,\n        loggedIn = _this$props.loggedIn;\n      if (loggedIn) this.props.history.push(\"/\");\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"background-container pt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"header\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: this.handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              name: \"email\",\n              label: \"Email\",\n              type: \"email\",\n              error: errors[\"email\"],\n              iconClass: \"fas fa-envelope\",\n              onChange: this.handleChange,\n              placeholder: \"Please enter your email...\",\n              value: email,\n              autoFocus: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              name: \"password\",\n              type: \"password\",\n              label: \"Password\",\n              error: errors[\"password\"],\n              iconClass: \"fas fa-key\",\n              onChange: this.handleChange,\n              placeholder: \"Please enter your password...\",\n              value: password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 13\n            }, this), authMessage && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-white\",\n              children: authMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              disabled: this.validate(),\n              type: \"submit\",\n              label: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n  return Login;\n}(React.Component);\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    loggedIn: state.auth.loggedIn,\n    authMessage: state.auth.authMessage\n  };\n};\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    signIn: function signIn(creds) {\n      return dispatch(_signIn(creds));\n    }\n  };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"names":["React","Joi","_","Input","connect","signIn","Button","jsxDEV","_jsxDEV","Login","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","data","email","password","errors","schema","string","required","label","handleChange","_ref","input","currentTarget","_objectSpread","errorMessage","validateProperty","name","value","setState","obj","_defineProperty","_Joi$validate","validate","error","details","message","options","abortEarly","result","forEach","element","path","handleSubmit","e","preventDefault","isEmpty","props","_createClass","key","render","_this$state","_this$props","authMessage","loggedIn","history","push","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","iconClass","onChange","placeholder","autoFocus","disabled","Component","mapStateToProps","auth","mapDispatchToProps","dispatch","creds"],"sources":["/Users/mina/Code/stock-frontend-v2/src/pages/Login/index.js"],"sourcesContent":["import React from \"react\";\nimport Joi from \"joi\";\nimport _ from \"lodash\";\nimport Input from \"../../components/common/Input\";\nimport { connect } from \"react-redux\";\nimport { signIn } from \"../../actions/authAction\";\nimport Button from \"../../components/common/Button\";\nimport \"./style.css\";\n\nclass Login extends React.Component {\n  state = {\n    data: {\n      email: \"\",\n      password: \"\",\n    },\n    errors: {},\n  };\n\n  schema = {\n    email: Joi.string().email().required().label(\"Email\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n\n  handleChange = ({ currentTarget: input }) => {\n    const errors = { ...this.state.errors };\n    const errorMessage = this.validateProperty(input);\n\n    if (errorMessage) errors[input.name] = errorMessage;\n    else delete errors[input.name];\n\n    const data = { ...this.state.data };\n    data[input.name] = input.value;\n    this.setState({ data, errors });\n  };\n\n  validateProperty = (input) => {\n    const { name, value } = input;\n    const obj = { [name]: value };\n    const schema = { [name]: this.schema[name] };\n    const { error } = Joi.validate(obj, schema);\n    return error ? error.details[0].message : null;\n  };\n\n  validate = () => {\n    const options = { abortEarly: false };\n    const result = Joi.validate(this.state.data, this.schema, options);\n    if (!result.error) return null;\n\n    const errors = {};\n    result.error.details.forEach(\n      (element) => (errors[element.path[0]] = element.message)\n    );\n    return errors;\n  };\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const errors = this.validate();\n    if (_.isEmpty(errors)) this.props.signIn(this.state.data);\n  };\n\n  render() {\n    const { data, errors } = this.state;\n    const { email, password } = data;\n    const { authMessage, loggedIn } = this.props;\n    if (loggedIn) this.props.history.push(\"/\");\n    return (\n      <div className=\"background-container pt-5\">\n        <div className=\"container\">\n          <h1 className=\"header\">Login</h1>\n          <form onSubmit={this.handleSubmit}>\n            <Input\n              name=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              error={errors[\"email\"]}\n              iconClass=\"fas fa-envelope\"\n              onChange={this.handleChange}\n              placeholder=\"Please enter your email...\"\n              value={email}\n              autoFocus\n            />\n            <Input\n              name=\"password\"\n              type=\"password\"\n              label=\"Password\"\n              error={errors[\"password\"]}\n              iconClass=\"fas fa-key\"\n              onChange={this.handleChange}\n              placeholder=\"Please enter your password...\"\n              value={password}\n            />\n            {authMessage && <p className=\"text-white\">{authMessage}</p>}\n            <Button disabled={this.validate()} type=\"submit\" label=\"Login\" />\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\nconst mapStateToProps = (state) => {\n  return {\n    loggedIn: state.auth.loggedIn,\n    authMessage: state.auth.authMessage,\n  };\n};\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    signIn: (creds) => dispatch(signIn(creds)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}